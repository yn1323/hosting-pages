import{G as v,I as z,r as P,j as e,B as u,N as F}from"./iframe-C_rgkzEe.js";import{A as R}from"./index-C2bVUVc_.js";import{C as E}from"./index-BLk1nnUV.js";import{g as _,e as T,d as U,f as V,h as H,u as $,s as G,i as N}from"./states-C-6AC4D5.js";import{u as q}from"./toaster-De9rtTUk.js";import{T as l}from"./index-DvCjFio_.js";import{G as k}from"./grid-UoGbtoX6.js";import{H as I}from"./h-stack-kLvObkFg.js";import{V as j}from"./v-stack-BdZrG5lB.js";import{A as O,a as J,b as K,c as L,d as M}from"./accordion-DcXXMTO2.js";const Q=F(a=>{const m=a(G),f=a($),{round:x}=a(_),b=a(T),c=a(N),p=m.filter(i=>i.round<x).reduce((i,d)=>(i[d.round]||(i[d.round]=[]),i[d.round].push(d),i),{}),C=(i,d)=>{if((c==null?void 0:c.userId)===i&&(c==null?void 0:c.round)===d)return"nextEditTarget";const g=b.find(t=>t.round===d);if(g){const t=g.conflictUsers.find(r=>r.userId===i);if(t)return t.isWinner?"winner":"loser"}return"none"};return Object.entries(p).map(([i,d])=>{const g=Number(i),t=f.map((r,n)=>{const o=d.find(s=>s.userId===r.id);return{order:n+1,userId:r.id,userName:r.name,avatar:r.avatar,item:(o==null?void 0:o.item)||"",comment:(o==null?void 0:o.comment)||"",conflictStatus:C(r.id,g)}});return{round:g,picks:t}}).sort((i,d)=>i.round-d.round)}),X=F(a=>a($).map(f=>({id:f.id,name:f.name,avatar:f.avatar,acquisitions:[]}))),W=(a,m)=>{switch(a){case"nextEditTarget":return{bg:"red.100",borderColor:"red.400",borderWidth:"2px",borderStyle:"solid",_hover:{bg:"red.150",borderColor:"red.500",transition:"all 0.15s ease"}};case"loser":return{bg:"orange.50",borderColor:"orange.300",borderWidth:"1px",borderStyle:"dashed",cursor:"not-allowed",opacity:.7,_hover:{bg:"orange.50"}};case"winner":case"none":return{borderColor:m?"gray.200":"gray.300",borderWidth:"1px",borderStyle:m?"solid":"dashed",_hover:{bg:"gray.50",borderColor:"gray.300",transition:"all 0.15s ease"}}}},D=({variant:a="sp",onEditClick:m})=>{const f=v(Q),x=v(X),{round:b}=v(_),c=v(T),y=v(U),p=v(N),C=z(V),i=z(H),{errorToast:d}=q();P.useEffect(()=>{c.length>0&&!y.isActive?C():c.length===0&&y.isActive&&i()},[c.length,y.isActive,C,i]);const g=(t,r)=>{if(y.isActive&&p)if(p.userId===t&&p.round===r)m({userId:t,round:r});else{const n=c.find(s=>s.round===r&&s.conflictUsers.some(h=>h.userId===t&&!h.isWinner)),o=x.find(s=>s.id===p.userId);d(n?`ã“ã®ã‚«ãƒ¼ãƒ‰ã¯é‡è¤‡æŒ‡åã§è² ã‘ãŸãŸã‚ç·¨é›†ãŒå¿…è¦ã§ã™ã€‚ã¾ãš${(o==null?void 0:o.name)||"å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼"}ã®Round ${p.round}ã‹ã‚‰é †ç•ªã«ç·¨é›†ã—ã¦ãã ã•ã„ã€‚`:`é‡è¤‡æŒ‡åè§£æ±ºä¸­ã§ã™ã€‚ã¾ãš${(o==null?void 0:o.name)||"å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼"}ã®Round ${p.round}ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚`)}else m({userId:t,round:r})};if(a==="pc"){const t={p:2,bg:"gray.100",borderRadius:"md",fontSize:"xs",fontWeight:"bold",textAlign:"center",color:"gray.700",display:"flex",alignItems:"center",justifyContent:"center",minH:"40px"},r={p:2,bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",fontSize:"xs",minH:"40px",display:"flex",alignItems:"center"};return b===1?e.jsx(u,{flex:1,w:"full",children:e.jsx(E,{variant:"elevated",size:"md",children:e.jsxs(u,{h:"full",display:"flex",flexDirection:"column",children:[e.jsx(l,{fontSize:"md",fontWeight:"bold",mb:3,children:"éŽåŽ»ã®ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœ"}),e.jsx(u,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",py:8,children:e.jsxs(l,{fontSize:"sm",color:"gray.500",textAlign:"center",children:["ã¾ã é–‹ç¥¨ãŒå§‹ã¾ã£ã¦ã„ã¾ã›ã‚“",e.jsx("br",{}),"æœ€åˆã®Roundã®æŠ½é¸ã‚’ãŠå¾…ã¡ãã ã•ã„"]})})]})})}):e.jsx(u,{flex:1,w:"full",pb:2,children:e.jsx(E,{variant:"elevated",size:"md",children:e.jsxs(u,{h:"full",display:"flex",flexDirection:"column",children:[e.jsx(l,{fontSize:"md",fontWeight:"bold",mb:3,children:"ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœ"}),e.jsxs(k,{templateColumns:`60px ${"minmax(120px, 1fr) ".repeat(x.length)}`,gap:2,mb:2,children:[e.jsx(u,{...t,children:"Round"}),x.map(n=>e.jsx(u,{...t,children:e.jsxs(I,{gap:1,justify:"center",children:[e.jsx(R,{avatarNumber:n.avatar,name:n.name,size:"xs"}),e.jsx(l,{children:n.name})]})},n.id))]}),e.jsx(u,{flex:"1",overflow:"auto",children:e.jsx(j,{gap:1,align:"stretch",children:f.sort((n,o)=>n.round-o.round).map(n=>e.jsxs(k,{templateColumns:`60px ${"minmax(120px, 1fr) ".repeat(x.length)}`,gap:2,children:[e.jsx(u,{...r,fontSize:"sm",fontWeight:"bold",textAlign:"center",color:"gray.800",justifyContent:"center",children:n.round}),x.map(o=>{const s=n.picks.find(B=>B.userId===o.id),h=!!(s!=null&&s.item),S=(s==null?void 0:s.conflictStatus)||"none",A=W(S,h),w=S!=="loser";return e.jsx(u,{...r,...A,cursor:w?"pointer":"not-allowed",onClick:()=>{g(o.id,n.round)},children:s!=null&&s.item?e.jsxs(j,{gap:0,align:"start",w:"full",children:[e.jsx(l,{fontWeight:"medium",color:"gray.800",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",children:s.item}),e.jsx(l,{color:"gray.500",fontSize:"2xs",py:s.comment!==""?0:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",children:s.comment!==""?`(${s.comment})`:" "})]}):e.jsx(l,{color:"gray.400",fontSize:"2xs",children:"+ è¿½åŠ "})},o.id)})]},n.round))})})]})})})}return b===1?e.jsxs(j,{gap:2,w:"full",children:[e.jsx(l,{fontSize:"md",fontWeight:"bold",color:"gray.800",alignSelf:"start",children:"ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœ"}),e.jsx(u,{w:"full",py:12,display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.50",borderRadius:"lg",border:"1px solid",borderColor:"gray.200",children:e.jsxs(l,{fontSize:"sm",color:"gray.500",textAlign:"center",children:["ã¾ã é–‹ç¥¨ãŒå§‹ã¾ã£ã¦ã„ã¾ã›ã‚“",e.jsx("br",{}),"æœ€åˆã®Roundã®æŠ½é¸ã‚’é–‹å§‹ã—ã¦ãã ã•ã„"]})})]}):e.jsxs(j,{gap:2,w:"full",children:[e.jsx(l,{fontSize:"md",fontWeight:"bold",color:"gray.800",alignSelf:"start",children:"ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœ"}),e.jsx(O,{defaultValue:[],multiple:!0,w:"full",variant:"enclosed",children:f.sort((t,r)=>t.round-r.round).map(t=>{const r=c.some(n=>n.round===t.round);return e.jsxs(J,{value:`round-${t.round}`,children:[e.jsx(K,{bg:r?"red.50":void 0,borderColor:r?"red.200":void 0,_hover:{bg:r?"red.100":"gray.50"},children:e.jsxs(I,{justify:"space-between",w:"full",cursor:"pointer",children:[e.jsxs(l,{fontSize:"sm",fontWeight:"bold",color:r?"red.700":"gray.700",children:["Round ",t.round,r&&" ðŸ”¥"]}),e.jsx(L,{color:r?"red.500":void 0})]})}),e.jsx(M,{children:e.jsx(j,{gap:1,w:"full",py:2,children:x.map(n=>{const o=t.picks.find(w=>w.userId===n.id),s=!!(o!=null&&o.item),h=(o==null?void 0:o.conflictStatus)||"none",S=W(h,s),A=h!=="loser";return e.jsxs(I,{w:"full",p:1.5,...S,borderRadius:"md",cursor:A?"pointer":"not-allowed",onClick:()=>{g(n.id,t.round)},children:[e.jsx(R,{avatarNumber:n.avatar,name:n.name,size:"xs"}),e.jsxs(j,{align:"start",gap:0,flex:1,children:[e.jsx(l,{fontSize:"sm",fontWeight:"medium",children:n.name}),o!=null&&o.item?e.jsxs(e.Fragment,{children:[e.jsx(l,{fontSize:"sm",color:"gray.600",children:o.item}),e.jsx(l,{fontSize:"xs",color:"gray.600",py:o.comment!==""?0:2,children:o.comment!==""?`(${o.comment})`:""})]}):e.jsx(l,{fontSize:"xs",color:"gray.400",py:2,children:"+ è¿½åŠ "})]})]},n.id)})})})]},t.round)})})]})};try{D.displayName="PastDraftResults",D.__docgenInfo={description:`éŽåŽ»ã®ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœè¡¨ç¤ºã®å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
PCç‰ˆ: ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼è¡¨ç¤º
SPç‰ˆ: ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å½¢å¼è¡¨ç¤º`,displayName:"PastDraftResults",props:{variant:{defaultValue:{value:"sp"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"pc"'},{value:'"sp"'}]}},onEditClick:{defaultValue:null,description:"",name:"onEditClick",required:!0,type:{name:"({ userId, round }: { userId?: string | undefined; round?: number | undefined; }) => void"}}}}}catch{}export{D as P};
