import{r as d,m as E,j as o,t as M,c as Ke,d as S,i as Xe,b as Je,e as Ye,f as Qe,g as Ze,h as et,k as ie,s as tt,l as st,n as ot,o as at,p as P,q as rt,u as nt,v as it,w as ut,x as lt,y as ct,z as dt,A as mt,C as pt,D as ft,E as gt,F as vt,G as k,H as ht,I as T,B as I,L as ce,J as bt,K as xt}from"./iframe-RlG1jcEu.js";import{u as H,b as W,c as z,a as ue,g as G,s as le}from"./states-TCS8mwE7.js";import{B as de}from"./index-BZQ0ZqOG.js";import{L as yt}from"./index-B4lUHnSv.js";import{d as Pe}from"./common-CxXojnM3.js";import{q as Ct,o as It,w as me,c as St,a as Te,d as Rt}from"./index.esm-ClM2GOLW.js";import{u as At,a as Pt}from"./useRealtimeUsers-Cgo5ya8g.js";import{u as Tt}from"./useGroup-CuqDamYW.js";import{C as pe}from"./index-DNhb_fHX.js";import{C as fe}from"./index-DDzIFGcY.js";import{C as ge}from"./index-DVmUniSG.js";import{u as jt,I as ve}from"./index-CkkV2h8f.js";import{u as _t,O as he}from"./index-B7COVL2k.js";import{u as Et,S as be}from"./index-DhJZ0KuU.js";import{u as wt,S as xe}from"./index-CKRreKlI.js";import{P as ye}from"./index-DZ3t5G56.js";import{u as Ft}from"./use-breakpoint-DzLnDp4J.js";import{V as K}from"./v-stack-DN8eplg_.js";import{H as j}from"./h-stack-Cwz9MMsq.js";import{T as R}from"./index-HKIpGz3m.js";import{C as je}from"./container-C6Xqqs9b.js";import{G as Vt}from"./grid-RxMw40ZH.js";import{c as Nt}from"./create-slot-recipe-context-B6SO3hUu.js";import{c as $,u as Bt,a as Ot,b as Lt,n as Dt}from"./index-DKU8_rGA.js";import{u as Mt,s as _e,R as Ee}from"./render-strategy-BKyw0Cjf.js";import{c as kt,a as w,b as Ut}from"./factory-n0XrCoXN.js";import{u as Ht,P as Wt}from"./responsive-modal-Bdo-IWTZ.js";import{u as zt}from"./utils-Hyq53JDb.js";import"./preload-helper-Dp1pzeXC.js";import"./index-RKMvwcxj.js";import"./useChat-BNFixBEK.js";import"./index-B-jp8P-s.js";import"./index-CTmrF6FQ.js";import"./card-BE7LpWow.js";import"./zod-CiJG07Vp.js";import"./useModal-D_Wdx75F.js";import"./toaster-BzHW-UPD.js";import"./index-BML0wms3.js";import"./accordion-CjEaugoE.js";const[we,q]=kt({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),Gt=$(),Fe=d.forwardRef((e,t)=>{const[a,s]=Gt(e,["value"]),i=q(),n=Mt(),u=Ht({...n,present:i.value===e.value,immediate:!0}),b=E(i.getContentProps(a),u.getPresenceProps(),s);return o.jsx(Wt,{value:u,children:u.unmounted?null:o.jsx(w.div,{...b,ref:Ut(u.ref,t)})})});Fe.displayName="TabContent";const Ve=d.forwardRef((e,t)=>{const a=q(),s=E(a.getIndicatorProps(),e);return o.jsx(w.div,{...s,ref:t})});Ve.displayName="TabIndicator";const Ne=d.forwardRef((e,t)=>{const a=q(),s=E(a.getListProps(),e);return o.jsx(w.div,{...s,ref:t})});Ne.displayName="TabList";const $t=$(),Be=d.forwardRef((e,t)=>{const[a,s]=$t(e,["disabled","value"]),i=q(),n=E(i.getTriggerProps(a),s);return o.jsx(w.button,{...n,ref:t})});Be.displayName="TabTrigger";var qt=Ke("tabs").parts("root","list","trigger","content","indicator"),N=qt.build(),Kt=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`tabs:${e.id}`},L=e=>{var t;return((t=e.ids)==null?void 0:t.list)??`tabs:${e.id}:list`},re=(e,t)=>{var a,s;return((s=(a=e.ids)==null?void 0:a.content)==null?void 0:s.call(a,t))??`tabs:${e.id}:content-${t}`},A=(e,t)=>{var a,s;return((s=(a=e.ids)==null?void 0:a.trigger)==null?void 0:s.call(a,t))??`tabs:${e.id}:trigger-${t}`},Oe=e=>{var t;return((t=e.ids)==null?void 0:t.indicator)??`tabs:${e.id}:indicator`},Xt=e=>e.getById(L(e)),Jt=(e,t)=>e.getById(re(e,t)),U=(e,t)=>t!=null?e.getById(A(e,t)):null,Ce=e=>e.getById(Oe(e)),F=e=>{const a=`[role=tab][data-ownedby='${CSS.escape(L(e))}']:not([disabled])`;return mt(Xt(e),a)},Yt=e=>lt(F(e)),Qt=e=>ut(F(e)),Zt=(e,t)=>it(F(e),A(e,t.value),t.loopFocus),es=(e,t)=>nt(F(e),A(e,t.value),t.loopFocus),Le=e=>({x:(e==null?void 0:e.offsetLeft)??0,y:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0}),ts=(e,t)=>{const a=pt(F(e),A(e,t));return Le(a)};function ss(e,t){const{state:a,send:s,context:i,prop:n,scope:u}=e,b=n("translations"),m=a.matches("focused"),g=n("orientation")==="vertical",x=n("orientation")==="horizontal",y=n("composite");function C(r){return{selected:i.get("value")===r.value,focused:i.get("focusedValue")===r.value,disabled:!!r.disabled}}return{value:i.get("value"),focusedValue:i.get("focusedValue"),setValue(r){s({type:"SET_VALUE",value:r})},clearValue(){s({type:"CLEAR_VALUE"})},setIndicatorRect(r){const c=A(u,r);s({type:"SET_INDICATOR_RECT",id:c})},syncTabIndex(){s({type:"SYNC_TAB_INDEX"})},selectNext(r){s({type:"TAB_FOCUS",value:r,src:"selectNext"}),s({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(r){s({type:"TAB_FOCUS",value:r,src:"selectPrev"}),s({type:"ARROW_PREV",src:"selectPrev"})},focus(){var c;const r=i.get("value");r&&((c=U(u,r))==null||c.focus())},getRootProps(){return t.element({...N.root.attrs,id:Kt(u),"data-orientation":n("orientation"),"data-focus":S(m),dir:n("dir")})},getListProps(){return t.element({...N.list.attrs,id:L(u),role:"tablist",dir:n("dir"),"data-focus":S(m),"aria-orientation":n("orientation"),"data-orientation":n("orientation"),"aria-label":b==null?void 0:b.listLabel,onKeyDown(r){if(r.defaultPrevented||Ye(r)||!Qe(r.currentTarget,Ze(r)))return;const c={ArrowDown(){x||s({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){x||s({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){g||s({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){g||s({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){s({type:"HOME"})},End(){s({type:"END"})}};let p=et(r,{dir:n("dir"),orientation:n("orientation")});const l=c[p];if(l){r.preventDefault(),l(r);return}}})},getTriggerState:C,getTriggerProps(r){const{value:c,disabled:p}=r,l=C(r);return t.button({...N.trigger.attrs,role:"tab",type:"button",disabled:p,dir:n("dir"),"data-orientation":n("orientation"),"data-disabled":S(p),"aria-disabled":p,"data-value":c,"aria-selected":l.selected,"data-selected":S(l.selected),"data-focus":S(l.focused),"aria-controls":l.selected?re(u,c):void 0,"data-ownedby":L(u),"data-ssr":S(i.get("ssr")),id:A(u,c),tabIndex:l.selected&&y?0:-1,onFocus(){s({type:"TAB_FOCUS",value:c})},onBlur(v){const f=v.relatedTarget;(f==null?void 0:f.getAttribute("role"))!=="tab"&&s({type:"TAB_BLUR"})},onClick(v){v.defaultPrevented||Xe(v)||p||(Je()&&v.currentTarget.focus(),s({type:"TAB_CLICK",value:c}))}})},getContentProps(r){const{value:c}=r,p=i.get("value")===c;return t.element({...N.content.attrs,dir:n("dir"),id:re(u,c),tabIndex:y?0:-1,"aria-labelledby":A(u,c),role:"tabpanel","data-ownedby":L(u),"data-selected":S(p),"data-orientation":n("orientation"),hidden:!p})},getIndicatorProps(){const r=i.get("indicatorRect"),c=r==null||r.width===0&&r.height===0&&r.x===0&&r.y===0;return t.element({id:Oe(u),...N.indicator.attrs,dir:n("dir"),"data-orientation":n("orientation"),hidden:c,style:{"--transition-property":"left, right, top, bottom, width, height","--left":M(r==null?void 0:r.x),"--top":M(r==null?void 0:r.y),"--width":M(r==null?void 0:r.width),"--height":M(r==null?void 0:r.height),position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:"var(--transition-duration, 150ms)",transitionTimingFunction:"var(--transition-timing-function)",[x?"left":"top"]:x?"var(--left)":"var(--top)"}})}}}var{createMachine:os}=tt(),as=os({props({props:e}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(t){ct(t.node)},defaultValue:null,...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(a){var s;(s=e("onValueChange"))==null||s({value:a})}})),focusedValue:t(()=>({defaultValue:e("value")||e("defaultValue"),sync:!0,onChange(a){var s;(s=e("onFocusChange"))==null||s({focusedValue:a})}})),ssr:t(()=>({defaultValue:!0})),indicatorRect:t(()=>({defaultValue:null}))}},watch({context:e,prop:t,track:a,action:s}){a([()=>e.get("value")],()=>{s(["syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),a([()=>t("dir"),()=>t("orientation")],()=>{s(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:e})=>e("activationMode")==="automatic"},actions:{selectFocusedTab({context:e,prop:t}){P(()=>{const a=e.get("focusedValue");if(!a)return;const i=t("deselectable")&&e.get("value")===a?null:a;e.set("value",i)})},setFocusedValue({context:e,event:t,flush:a}){t.value!=null&&a(()=>{e.set("focusedValue",t.value)})},clearFocusedValue({context:e}){e.set("focusedValue",null)},setValue({context:e,event:t,prop:a}){const s=a("deselectable")&&e.get("value")===e.get("focusedValue");e.set("value",s?null:t.value)},clearValue({context:e}){e.set("value",null)},focusFirstTab({scope:e}){P(()=>{var t;(t=Yt(e))==null||t.focus()})},focusLastTab({scope:e}){P(()=>{var t;(t=Qt(e))==null||t.focus()})},focusNextTab({context:e,prop:t,scope:a,event:s}){const i=s.value??e.get("focusedValue");if(!i)return;const n=Zt(a,{value:i,loopFocus:t("loopFocus")});P(()=>{t("composite")?n==null||n.focus():(n==null?void 0:n.dataset.value)!=null&&e.set("focusedValue",n.dataset.value)})},focusPrevTab({context:e,prop:t,scope:a,event:s}){const i=s.value??e.get("focusedValue");if(!i)return;const n=es(a,{value:i,loopFocus:t("loopFocus")});P(()=>{t("composite")?n==null||n.focus():(n==null?void 0:n.dataset.value)!=null&&e.set("focusedValue",n.dataset.value)})},syncTabIndex({context:e,scope:t}){P(()=>{const a=e.get("value");if(!a)return;const s=Jt(t,a);if(!s)return;rt(s).length>0?s.removeAttribute("tabindex"):s.setAttribute("tabindex","0")})},cleanupObserver({refs:e}){const t=e.get("indicatorCleanup");t&&t()},setIndicatorRect({context:e,event:t,scope:a}){const s=t.id??e.get("value");!Ce(a)||!s||!U(a,s)||e.set("indicatorRect",ts(a,s))},syncSsr({context:e}){e.set("ssr",!1)},syncIndicatorRect({context:e,refs:t,scope:a}){const s=t.get("indicatorCleanup");if(s&&s(),!Ce(a))return;const n=()=>{const m=U(a,e.get("value"));if(!m)return;const g=Le(m);e.set("indicatorRect",x=>dt(x,g)?x:g)};n();const u=F(a),b=ot(...u.map(m=>at.observe(m,n)));t.set("indicatorCleanup",b)},navigateIfNeeded({context:e,prop:t,scope:a}){var n;const s=e.get("value");if(!s)return;const i=U(a,s);st(i)&&((n=t("navigate"))==null||n({value:s,node:i,href:i.href}))}}}});ie()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]);ie()(["disabled","value"]);ie()(["value"]);const rs=e=>{const t=d.useId(),{getRootNode:a}=Bt(),{dir:s}=Ot(),i={id:t,dir:s,getRootNode:a,...e},n=Lt(as,i);return ss(n,Dt)},ns=$(),De=d.forwardRef((e,t)=>{const[a,s]=_e(e),[i,n]=ns(s,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),u=rs(i),b=E(u.getRootProps(),n);return o.jsx(we,{value:u,children:o.jsx(Ee,{value:a,children:o.jsx(w.div,{...b,ref:t})})})});De.displayName="TabsRoot";const is=$(),Me=d.forwardRef((e,t)=>{const[a,s]=_e(e),[{value:i},n]=is(s,["value"]),u=E(i.getRootProps(),n);return o.jsx(we,{value:i,children:o.jsx(Ee,{value:a,children:o.jsx(w.div,{...u,ref:t})})})});Me.displayName="TabsRootProvider";function Ie(e){return vt(e,t=>t==="auto"?"auto":`span ${t}/span ${t}`)}const ne=d.forwardRef(function(t,a){const{area:s,colSpan:i,colStart:n,colEnd:u,rowEnd:b,rowSpan:m,rowStart:g,...x}=t,y=d.useMemo(()=>ft({gridArea:s,gridColumn:Ie(i),gridRow:Ie(m),gridColumnStart:n,gridColumnEnd:u,gridRowStart:g,gridRowEnd:b}),[s,i,n,u,b,m,g]);return o.jsx(gt.div,{ref:a,css:[y,t.css],...x})});ne.displayName="GridItem";const{withProvider:ke,withContext:D}=Nt({key:"tabs"});ke(Me,"root",{forwardAsChild:!0});const us=ke(De,"root",{forwardAsChild:!0}),Se=D(Be,"trigger",{forwardAsChild:!0}),Re=D(Fe,"content",{forwardAsChild:!0});D("div","contentGroup");const ls=D(Ne,"list",{forwardAsChild:!0});D(Ve,"indicator",{forwardAsChild:!0});const cs=[{id:"1",name:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",currentPick:"ÂÄôË£úA („Çø„Ç§„ÉóB)",acquisitions:[{name:"Â§ßË∞∑ÁøîÂπ≥",comment:"„ÇÑ„Å£„Å±„Çä‰∫åÂàÄÊµÅÔºÅ"},{name:"‰Ωê„ÄÖÊú®ÊúóÂ∏å",comment:"ÂÆåÂÖ®Ë©¶Âêà„ÅÆÂÆüÁ∏æ"}]},{id:"2",name:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",currentPick:"ÂÄôË£úB („Çø„Ç§„ÉóA)",acquisitions:[{name:"Â±±Êú¨Áî±‰º∏",comment:"ÊúÄÂº∑„ÅÆ„Ç®„Éº„Çπ"}]},{id:"3",name:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",currentPick:"ÈÅ∏Êäû‰∏≠...",acquisitions:[]}],ds=[{round:3,picks:[{order:1,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†G",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†H",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†I",comment:"„Çø„Ç§„ÉóC"}]},{round:2,picks:[{order:1,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†D",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†E",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†F",comment:"„Çø„Ç§„ÉóC"}]},{round:1,picks:[{order:1,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†A",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†B",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†C",comment:"„Çø„Ç§„ÉóC"}]}],ms=[{id:"1",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"„Éâ„É©„Éï„Éà„ÇíÈñãÂßã„Åó„Åæ„Åó„ÅüÔºÅ",timestamp:"14:00",isSystem:!0,isCurrentUser:!1},{id:"2",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",content:"‰ªäÂπ¥„ÅØÊäïÊâã‰∏≠ÂøÉ„Åß„ÅÑ„Åç„Åæ„ÅôÔºÅ",timestamp:"14:01",isSystem:!1,isCurrentUser:!0},{id:"3",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"Á¨¨1Â∑°ÁõÆ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü",timestamp:"14:05",isSystem:!0,isCurrentUser:!1},{id:"4",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",content:"Â§ßË∞∑Âèñ„Çâ„Çå„Åü„Äúüò≠",timestamp:"14:05",isSystem:!1,isCurrentUser:!1},{id:"5",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"‰ΩêËó§Ê¨°ÈÉé„Åï„Çì„ÅÆÈÅ∏Êäû‰∏≠„Åß„Åô",timestamp:"14:38",isSystem:!0,isCurrentUser:!1}],ps=4,fs=(e,t,a)=>{const[s,i]=d.useState([]),[n,u]=d.useState(!0),[b,m]=d.useState(null);return d.useEffect(()=>{if(!e){i([]),u(!1);return}const g=Ct(St(Pe,"app/onlinedraft/log"),me("groupId","==",e),me("deleteFlg","==",!1),It("date","asc"));return Te(g,y=>{const C=y.docs.map(r=>{var c;const p=r.data();var l;const v=(l=(c=p.createdAt)===null||c===void 0?void 0:c.toDate())!==null&&l!==void 0?l:new Date,f=p.userId==="system"||!p.userId,h={name:f?"„Ç∑„Çπ„ÉÜ„É†":"ÂåøÂêç„É¶„Éº„Ç∂„Éº",avatar:f?"99":"1"};return{id:r.id,userId:p.userId,userName:h.name,avatar:h.avatar,content:p.message,timestamp:v,isSystem:f,isCurrentUser:!f&&p.userId===a}});i(C),u(!1),m(null)},y=>{console.error("„ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏Áõ£Ë¶ñ„Ç®„É©„Éº:",y),m(y),u(!1)})},[e,t,a]),{messages:s,loading:n,error:b}},gs=e=>{const[t,a]=d.useState([]),[s,i]=d.useState(!0),[n,u]=d.useState(null),b=k(H),m=d.useMemo(()=>b.filter(g=>g==null?void 0:g.id).map(g=>g.id),[b]);return d.useEffect(()=>{if(!e||m.length===0){a([]),i(!1);return}const g=new Map,x=[];let y=0;const C=()=>{const r=[];g.forEach(c=>{r.push(...c)}),a(r)};return m.forEach(r=>{const c=Rt(Pe,"app/onlinedraft/selection",r),p=Te(c,l=>{const v=[];if(l.exists()){const f=l.data();f!=null&&f.selection&&Array.isArray(f.selection)&&f.selection.forEach(h=>{(!h.groupId||h.groupId===e)&&v.push({...h,userId:r,groupId:h.groupId||e})})}g.set(r,v),C(),y++,y>=m.length&&i(!1)},l=>{console.error(`User ${r} selection error:`,l),u(l),i(!1)});x.push(p)}),()=>{x.forEach(r=>r())}},[e,m]),{selections:t,loading:s,error:n}},vs=e=>{const t=ht(),a=T(W),s=T(z),i=T(H),n=T(ue),u=T(G),b=T(le);d.useEffect(()=>{const l=sessionStorage.getItem("onlinedraft_user_id");l?(a(e),s(l)):t.push(`/lobby/${e}`)},[e,t,a,s]);const{users:m,loading:g}=At(e);d.useEffect(()=>{const l=m.map(({avatar:v,userId:f,userName:h})=>({name:h,id:f,avatar:v}));i(l)},[m,i]);const{messages:x,loading:y}=fs(e);d.useEffect(()=>{const l=x.map(({userId:v,timestamp:f,content:h})=>({date:f,message:h,userId:v}));n(l)},[x,n]);const{group:C,loading:r}=Pt(e);d.useEffect(()=>{var l,v;u({round:(l=C==null?void 0:C.round)!==null&&l!==void 0?l:-1,groupName:(v=C==null?void 0:C.groupName)!==null&&v!==void 0?v:""})},[C,u]);const{selections:c,loading:p}=gs(e);return d.useEffect(()=>{const l=c.map(({item:v,comment:f,round:h,userId:V,groupId:$e,randomNumber:qe})=>({item:v,comment:f,round:h,userId:V,groupId:$e,randomNumber:qe}));b(l)},[c,b]),{isLoading:g||y||r||p}},_=()=>{const e=k(z),t=k(W),{round:a,groupName:s}=k(G),i=d.useRef(a),n=Ft({base:!0,md:!1}),[u,b]=d.useState({round:-1,userId:""}),[m,g]=d.useState("draft"),x=jt(),y=_t(),C=Et(),r=wt(),{incrementRound:c}=Tt();d.useEffect(()=>{i.current!==-1&&a>i.current&&r.open(),i.current=a},[a,r]);const p=({userId:h,round:V})=>{b({round:V??a,userId:h??e}),x.open()},l=async({allSelected:h})=>{h?await f():y.open()},v=async h=>{await p(h)},f=async()=>{await c(t),y.close()};return n?o.jsxs(K,{h:"100vh",gap:0,children:[o.jsx(I,{bg:"white",borderBottom:"1px",borderColor:"gray.200",p:2,w:"full",position:"sticky",top:0,zIndex:10,children:o.jsxs(j,{justify:"space-between",align:"center",children:[o.jsx(I,{flex:1}),o.jsx(R,{fontSize:"lg",fontWeight:"bold",textAlign:"center",children:s}),o.jsx(I,{flex:1,display:"flex",justifyContent:"flex-end",children:o.jsx(de,{variant:"ghost",size:"sm",onClick:C.open,children:o.jsxs(j,{gap:1,align:"center",children:[o.jsx(ce,{size:14}),o.jsx(R,{children:"„Ç∑„Çß„Ç¢"})]})})})]})}),o.jsxs(us,{value:m,onValueChange:h=>g(h.value),flex:1,display:"flex",flexDirection:"column",w:"full",overflow:"hidden",children:[o.jsxs(ls,{bg:"gray.50",borderBottom:"2px solid",borderColor:"gray.200",flexShrink:0,children:[o.jsx(Se,{value:"draft",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:o.jsxs(j,{gap:2,justify:"center",w:"full",children:[o.jsx(bt,{size:18}),o.jsx(R,{fontSize:"sm",children:"„Éâ„É©„Éï„Éà"})]})}),o.jsx(Se,{value:"chat",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:o.jsxs(j,{gap:2,justify:"center",w:"full",children:[o.jsx(xt,{size:18}),o.jsx(R,{fontSize:"sm",children:"„ÉÅ„É£„ÉÉ„Éà/„É≠„Ç∞"})]})})]}),o.jsxs(I,{flex:1,overflow:"hidden",minH:0,children:[o.jsx(Re,{value:"draft",h:"full",overflow:"auto",p:1,children:o.jsxs(K,{gap:3,p:1,children:[o.jsx(ge,{variant:"sp",onItemSelect:p,onOpenResult:l}),o.jsx(ye,{variant:"sp",onEditClick:v})]})}),o.jsx(Re,{value:"chat",h:"full",overflow:"hidden",display:"flex",flexDirection:"column",children:o.jsx(I,{flex:1,overflow:"auto",p:3,children:o.jsx(fe,{})})})]})]}),m==="chat"&&o.jsx(I,{bg:"white",borderTop:"1px",borderColor:"gray.200",p:3,w:"full",position:"sticky",bottom:0,children:o.jsx(pe,{})}),o.jsx(ve,{isOpen:x.isOpen,onClose:x.close,round:u.round,userId:u.userId},Math.random()),o.jsx(he,{isOpen:y.isOpen,onClose:y.close,onExecuteOpenResult:f}),o.jsx(be,{isOpen:C.isOpen,onClose:C.close,groupId:t,groupName:s}),o.jsx(xe,{isOpen:r.isOpen,onClose:r.close,variant:r.variant})]}):o.jsxs(I,{minH:"100vh",py:2,children:[o.jsxs(je,{maxW:"full",children:[o.jsx(I,{mb:2,children:o.jsxs(j,{justify:"space-between",align:"center",children:[o.jsx(R,{fontSize:"2xl",fontWeight:"bold",color:"gray.800",children:s}),o.jsx(de,{variant:"outline",size:"md",onClick:C.open,children:o.jsxs(j,{gap:1,align:"center",children:[o.jsx(ce,{size:16}),o.jsx(R,{children:"„Ç∑„Çß„Ç¢"})]})})]})}),o.jsxs(Vt,{templateColumns:"7fr 3fr",gap:2,h:"calc(100vh - 80px)",children:[o.jsx(ne,{h:"100%",children:o.jsxs(K,{gap:2,h:"100%",w:"full",align:"stretch",children:[o.jsx(ge,{variant:"pc",onItemSelect:p,onOpenResult:l}),o.jsx(ye,{variant:"pc",onEditClick:v})]})}),o.jsx(ne,{h:"100%",children:o.jsxs(I,{h:"100%",maxH:"calc(100vh - 70px)",bg:"white",boxShadow:"lg",p:3,borderRadius:"lg",display:"flex",flexDirection:"column",overflow:"hidden",children:[o.jsx(R,{fontSize:"lg",fontWeight:"bold",mb:3,flexShrink:0,children:"„ÉÅ„É£„ÉÉ„Éà"}),o.jsx(I,{flex:"1",overflow:"auto",mb:3,minH:0,children:o.jsx(fe,{})}),o.jsx(I,{flexShrink:0,children:o.jsx(pe,{})})]})})]})]}),o.jsx(ve,{isOpen:x.isOpen,onClose:x.close,round:u.round,userId:u.userId},Math.random()),o.jsx(he,{isOpen:y.isOpen,onClose:y.close,onExecuteOpenResult:f}),o.jsx(be,{isOpen:C.isOpen,onClose:C.close,groupId:t,groupName:s}),o.jsx(xe,{isOpen:r.isOpen,onClose:r.close,variant:r.variant})]})},Ae=({groupId:e})=>{const{isLoading:t}=vs(e);return t?o.jsx(I,{bg:"gray.50",minH:"100vh",py:[4,8],children:o.jsx(je,{maxW:"container.lg",children:o.jsx(yt,{message:"„É≠„Éº„Éá„Ç£„É≥„Ç∞‰∏≠..."})})}):o.jsx(_,{})};try{_.displayName="DraftPageInner",_.__docgenInfo={description:`„Éâ„É©„Éï„ÉàÂÆüË°åÁîªÈù¢Inner„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàPresenterÔºâ
UIÊèèÁîª„Å®Áä∂ÊÖãÁÆ°ÁêÜ„ÇíÊãÖÂΩì„ÄÅÊñ∞„Åó„ÅÑhooksÊßãÈÄ†„Çí‰ΩøÁî®`,displayName:"DraftPageInner",props:{}}}catch{}try{Ae.displayName="DraftPage",Ae.__docgenInfo={description:`„Éâ„É©„Éï„ÉàÂÆüË°åÁîªÈù¢„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàContainerÔºâ
„É¢„ÉÉ„ÇØ„Éá„Éº„Çø„ÅÆÊèê‰æõ„ÅÆ„Åø„ÇíÊãÖÂΩì`,displayName:"DraftPage",props:{groupId:{defaultValue:null,description:"",name:"groupId",required:!0,type:{name:"string"}}}}}catch{}var X,J,Y,Q,Z,ee,te,se,oe,ae;const Ue=({initialValues:e,children:t})=>(zt(e),t),He=cs.map(e=>({id:e.id,name:e.name,avatar:e.avatar})),We=ms.map(e=>({date:{toDate:()=>new Date,toMillis:()=>Date.now()},message:e.content,userId:e.userName==="Áî∞‰∏≠Â§™ÈÉé"?"user1":"user2"})),ze=ds.flatMap(e=>e.picks.map(t=>({item:t.item,comment:t.comment,round:e.round,userId:t.userId,groupId:"test-group-id",randomNumber:Math.random()}))),Ge={round:ps,groupName:"„ÉÜ„Çπ„Éà„Éâ„É©„Éï„Éà‰ºöË≠∞"},so={title:"features/draft/DraftPage",component:_,parameters:{layout:"fullscreen"}},B={render:()=>o.jsx(Ue,{initialValues:[[W,"test-group-id"],[z,"user1"],[G,Ge],[H,He],[ue,We],[le,ze]],children:o.jsx(_,{})})},O={render:()=>o.jsx(Ue,{initialValues:[[W,"test-group-id"],[z,"user1"],[G,Ge],[H,He],[ue,We],[le,ze]],children:o.jsx(_,{})}),parameters:{viewport:{defaultViewport:"mobile1"}}};B.parameters={...B.parameters,docs:{...(X=B.parameters)===null||X===void 0?void 0:X.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>
}`,...(Y=B.parameters)===null||Y===void 0||(J=Y.docs)===null||J===void 0?void 0:J.source},description:{story:`„Éá„Éï„Ç©„É´„Éà„ÅÆ„Éâ„É©„Éï„Éà„Éö„Éº„Ç∏Ë°®Á§∫
Jotai atom„Çí‰ΩøÁî®„Åó„ÅüÁä∂ÊÖãÁÆ°ÁêÜ„ÉÜ„Çπ„Éà`,...(Z=B.parameters)===null||Z===void 0||(Q=Z.docs)===null||Q===void 0?void 0:Q.description}}};O.parameters={...O.parameters,docs:{...(ee=O.parameters)===null||ee===void 0?void 0:ee.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>,
  parameters: {
    viewport: {
      defaultViewport: 'mobile1'
    }
  }
}`,...(se=O.parameters)===null||se===void 0||(te=se.docs)===null||te===void 0?void 0:te.source},description:{story:`SPË°®Á§∫„ÅÆÂº∑Âà∂Á¢∫Ë™çÁî®
„Éì„É•„Éº„Éù„Éº„Éà„ÇíÂ∞è„Åï„ÅèË®≠ÂÆö„Åó„Å¶SPÁâà„É¨„Ç§„Ç¢„Ç¶„Éà„ÇíÁ¢∫Ë™ç`,...(ae=O.parameters)===null||ae===void 0||(oe=ae.docs)===null||oe===void 0?void 0:oe.description}}};const oo=["Default","SPLayout"];export{B as Default,O as SPLayout,oo as __namedExportsOrder,so as default};
