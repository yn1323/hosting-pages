import{r as d,m as E,j as a,t as k,c as Je,d as A,i as Ye,b as Qe,e as Ze,f as et,g as tt,h as st,k as ue,s as at,l as ot,n as rt,o as nt,p as j,q as it,u as ut,v as lt,w as ct,x as dt,y as mt,z as pt,A as ft,C as gt,D as vt,E as ht,F as bt,G as U,H as _,B as I,L as de,I as xt,J as yt}from"./iframe-CPNykFu4.js";import{u as W,b as z,c as G,a as le,g as $,s as ce}from"./states-BgKcEv6C.js";import{B as me}from"./index-CB7rXg8w.js";import{L as Ct}from"./index-Dlvphpuz.js";import{u as It,a as St,L as pe}from"./useRealtimeUsers-D6i33yZj.js";import{d as je}from"./common-CxXojnM3.js";import{q as Rt,o as At,w as fe,c as Pt,a as _e,d as Tt}from"./index.esm-ClM2GOLW.js";import{u as jt,C as we}from"./navigation-0SFJYBLy.js";import{u as _t}from"./useGroup-Cmcqwz5P.js";import{C as ge}from"./index-BbH-fVmg.js";import{C as ve}from"./index-Df2wO6Th.js";import{C as he}from"./index-Bqw8gB3Z.js";import{u as wt,I as be}from"./index-qZtizO1T.js";import{u as Et,O as xe}from"./index-DCrkS_UW.js";import{u as Ft,S as ye}from"./index-uL-8Iy-I.js";import{u as Vt,S as Ce}from"./index-B8smMzje.js";import{P as Ie}from"./index-BXymb0Ao.js";import{n as Ee}from"./index-DFT-raW7.js";import{u as Nt}from"./use-breakpoint-CqXmPAaL.js";import{V as K}from"./v-stack-ZFthQQXO.js";import{H as R}from"./h-stack-IZP0I_-8.js";import{T as P}from"./index-DeSftEHM.js";import{G as Bt}from"./grid-CFy8adA8.js";import{c as Lt}from"./create-slot-recipe-context-Cc8kd0Ma.js";import{c as q,u as Ot,a as Dt,b as Mt,n as kt}from"./index-teljsW8k.js";import{u as Ut,s as Fe,R as Ve}from"./render-strategy-O1XzUZnd.js";import{c as Ht,a as F,b as Wt}from"./factory-DuFKs9iv.js";import{u as zt,P as Gt}from"./responsive-modal-DETIp2Db.js";import{u as $t}from"./utils-Bl2jajJ7.js";import"./preload-helper-Dp1pzeXC.js";import"./config-2YLRfvKg.js";import"./use-merged-ref-DuAuqPT6.js";import"./index-BGCE8b3C.js";import"./useChat-3hcy5X5y.js";import"./index-DINeRgO7.js";import"./index-z05DsOaL.js";import"./card-BWzLt1o7.js";import"./zod-CJOOa1KA.js";import"./useModal-JLMgYJoB.js";import"./toaster-DFNY2rhd.js";import"./index-_BsFM55Z.js";import"./accordion-Dlm09CiK.js";const[Ne,X]=Ht({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),qt=q(),Be=d.forwardRef((e,t)=>{const[o,s]=qt(e,["value"]),i=X(),n=Ut(),l=zt({...n,present:i.value===e.value,immediate:!0}),m=E(i.getContentProps(o),l.getPresenceProps(),s);return a.jsx(Gt,{value:l,children:l.unmounted?null:a.jsx(F.div,{...m,ref:Wt(l.ref,t)})})});Be.displayName="TabContent";const Le=d.forwardRef((e,t)=>{const o=X(),s=E(o.getIndicatorProps(),e);return a.jsx(F.div,{...s,ref:t})});Le.displayName="TabIndicator";const Oe=d.forwardRef((e,t)=>{const o=X(),s=E(o.getListProps(),e);return a.jsx(F.div,{...s,ref:t})});Oe.displayName="TabList";const Xt=q(),De=d.forwardRef((e,t)=>{const[o,s]=Xt(e,["disabled","value"]),i=X(),n=E(i.getTriggerProps(o),s);return a.jsx(F.button,{...n,ref:t})});De.displayName="TabTrigger";var Kt=Je("tabs").parts("root","list","trigger","content","indicator"),B=Kt.build(),Jt=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`tabs:${e.id}`},D=e=>{var t;return((t=e.ids)==null?void 0:t.list)??`tabs:${e.id}:list`},ne=(e,t)=>{var o,s;return((s=(o=e.ids)==null?void 0:o.content)==null?void 0:s.call(o,t))??`tabs:${e.id}:content-${t}`},T=(e,t)=>{var o,s;return((s=(o=e.ids)==null?void 0:o.trigger)==null?void 0:s.call(o,t))??`tabs:${e.id}:trigger-${t}`},Me=e=>{var t;return((t=e.ids)==null?void 0:t.indicator)??`tabs:${e.id}:indicator`},Yt=e=>e.getById(D(e)),Qt=(e,t)=>e.getById(ne(e,t)),H=(e,t)=>t!=null?e.getById(T(e,t)):null,Se=e=>e.getById(Me(e)),V=e=>{const o=`[role=tab][data-ownedby='${CSS.escape(D(e))}']:not([disabled])`;return ft(Yt(e),o)},Zt=e=>dt(V(e)),es=e=>ct(V(e)),ts=(e,t)=>lt(V(e),T(e,t.value),t.loopFocus),ss=(e,t)=>ut(V(e),T(e,t.value),t.loopFocus),ke=e=>({x:(e==null?void 0:e.offsetLeft)??0,y:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0}),as=(e,t)=>{const o=gt(V(e),T(e,t));return ke(o)};function os(e,t){const{state:o,send:s,context:i,prop:n,scope:l}=e,m=n("translations"),f=o.matches("focused"),p=n("orientation")==="vertical",y=n("orientation")==="horizontal",x=n("composite");function b(r){return{selected:i.get("value")===r.value,focused:i.get("focusedValue")===r.value,disabled:!!r.disabled}}return{value:i.get("value"),focusedValue:i.get("focusedValue"),setValue(r){s({type:"SET_VALUE",value:r})},clearValue(){s({type:"CLEAR_VALUE"})},setIndicatorRect(r){const u=T(l,r);s({type:"SET_INDICATOR_RECT",id:u})},syncTabIndex(){s({type:"SYNC_TAB_INDEX"})},selectNext(r){s({type:"TAB_FOCUS",value:r,src:"selectNext"}),s({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(r){s({type:"TAB_FOCUS",value:r,src:"selectPrev"}),s({type:"ARROW_PREV",src:"selectPrev"})},focus(){var u;const r=i.get("value");r&&((u=H(l,r))==null||u.focus())},getRootProps(){return t.element({...B.root.attrs,id:Jt(l),"data-orientation":n("orientation"),"data-focus":A(f),dir:n("dir")})},getListProps(){return t.element({...B.list.attrs,id:D(l),role:"tablist",dir:n("dir"),"data-focus":A(f),"aria-orientation":n("orientation"),"data-orientation":n("orientation"),"aria-label":m==null?void 0:m.listLabel,onKeyDown(r){if(r.defaultPrevented||Ze(r)||!et(r.currentTarget,tt(r)))return;const u={ArrowDown(){y||s({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){y||s({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){p||s({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){p||s({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){s({type:"HOME"})},End(){s({type:"END"})}};let h=st(r,{dir:n("dir"),orientation:n("orientation")});const c=u[h];if(c){r.preventDefault(),c(r);return}}})},getTriggerState:b,getTriggerProps(r){const{value:u,disabled:h}=r,c=b(r);return t.button({...B.trigger.attrs,role:"tab",type:"button",disabled:h,dir:n("dir"),"data-orientation":n("orientation"),"data-disabled":A(h),"aria-disabled":h,"data-value":u,"aria-selected":c.selected,"data-selected":A(c.selected),"data-focus":A(c.focused),"aria-controls":c.selected?ne(l,u):void 0,"data-ownedby":D(l),"data-ssr":A(i.get("ssr")),id:T(l,u),tabIndex:c.selected&&x?0:-1,onFocus(){s({type:"TAB_FOCUS",value:u})},onBlur(g){const v=g.relatedTarget;(v==null?void 0:v.getAttribute("role"))!=="tab"&&s({type:"TAB_BLUR"})},onClick(g){g.defaultPrevented||Ye(g)||h||(Qe()&&g.currentTarget.focus(),s({type:"TAB_CLICK",value:u}))}})},getContentProps(r){const{value:u}=r,h=i.get("value")===u;return t.element({...B.content.attrs,dir:n("dir"),id:ne(l,u),tabIndex:x?0:-1,"aria-labelledby":T(l,u),role:"tabpanel","data-ownedby":D(l),"data-selected":A(h),"data-orientation":n("orientation"),hidden:!h})},getIndicatorProps(){const r=i.get("indicatorRect"),u=r==null||r.width===0&&r.height===0&&r.x===0&&r.y===0;return t.element({id:Me(l),...B.indicator.attrs,dir:n("dir"),"data-orientation":n("orientation"),hidden:u,style:{"--transition-property":"left, right, top, bottom, width, height","--left":k(r==null?void 0:r.x),"--top":k(r==null?void 0:r.y),"--width":k(r==null?void 0:r.width),"--height":k(r==null?void 0:r.height),position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:"var(--transition-duration, 150ms)",transitionTimingFunction:"var(--transition-timing-function)",[y?"left":"top"]:y?"var(--left)":"var(--top)"}})}}}var{createMachine:rs}=at(),ns=rs({props({props:e}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(t){mt(t.node)},defaultValue:null,...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){var s;(s=e("onValueChange"))==null||s({value:o})}})),focusedValue:t(()=>({defaultValue:e("value")||e("defaultValue"),sync:!0,onChange(o){var s;(s=e("onFocusChange"))==null||s({focusedValue:o})}})),ssr:t(()=>({defaultValue:!0})),indicatorRect:t(()=>({defaultValue:null}))}},watch({context:e,prop:t,track:o,action:s}){o([()=>e.get("value")],()=>{s(["syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),o([()=>t("dir"),()=>t("orientation")],()=>{s(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:e})=>e("activationMode")==="automatic"},actions:{selectFocusedTab({context:e,prop:t}){j(()=>{const o=e.get("focusedValue");if(!o)return;const i=t("deselectable")&&e.get("value")===o?null:o;e.set("value",i)})},setFocusedValue({context:e,event:t,flush:o}){t.value!=null&&o(()=>{e.set("focusedValue",t.value)})},clearFocusedValue({context:e}){e.set("focusedValue",null)},setValue({context:e,event:t,prop:o}){const s=o("deselectable")&&e.get("value")===e.get("focusedValue");e.set("value",s?null:t.value)},clearValue({context:e}){e.set("value",null)},focusFirstTab({scope:e}){j(()=>{var t;(t=Zt(e))==null||t.focus()})},focusLastTab({scope:e}){j(()=>{var t;(t=es(e))==null||t.focus()})},focusNextTab({context:e,prop:t,scope:o,event:s}){const i=s.value??e.get("focusedValue");if(!i)return;const n=ts(o,{value:i,loopFocus:t("loopFocus")});j(()=>{t("composite")?n==null||n.focus():(n==null?void 0:n.dataset.value)!=null&&e.set("focusedValue",n.dataset.value)})},focusPrevTab({context:e,prop:t,scope:o,event:s}){const i=s.value??e.get("focusedValue");if(!i)return;const n=ss(o,{value:i,loopFocus:t("loopFocus")});j(()=>{t("composite")?n==null||n.focus():(n==null?void 0:n.dataset.value)!=null&&e.set("focusedValue",n.dataset.value)})},syncTabIndex({context:e,scope:t}){j(()=>{const o=e.get("value");if(!o)return;const s=Qt(t,o);if(!s)return;it(s).length>0?s.removeAttribute("tabindex"):s.setAttribute("tabindex","0")})},cleanupObserver({refs:e}){const t=e.get("indicatorCleanup");t&&t()},setIndicatorRect({context:e,event:t,scope:o}){const s=t.id??e.get("value");!Se(o)||!s||!H(o,s)||e.set("indicatorRect",as(o,s))},syncSsr({context:e}){e.set("ssr",!1)},syncIndicatorRect({context:e,refs:t,scope:o}){const s=t.get("indicatorCleanup");if(s&&s(),!Se(o))return;const n=()=>{const f=H(o,e.get("value"));if(!f)return;const p=ke(f);e.set("indicatorRect",y=>pt(y,p)?y:p)};n();const l=V(o),m=rt(...l.map(f=>nt.observe(f,n)));t.set("indicatorCleanup",m)},navigateIfNeeded({context:e,prop:t,scope:o}){var n;const s=e.get("value");if(!s)return;const i=H(o,s);ot(i)&&((n=t("navigate"))==null||n({value:s,node:i,href:i.href}))}}}});ue()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]);ue()(["disabled","value"]);ue()(["value"]);const is=e=>{const t=d.useId(),{getRootNode:o}=Ot(),{dir:s}=Dt(),i={id:t,dir:s,getRootNode:o,...e},n=Mt(ns,i);return os(n,kt)},us=q(),Ue=d.forwardRef((e,t)=>{const[o,s]=Fe(e),[i,n]=us(s,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),l=is(i),m=E(l.getRootProps(),n);return a.jsx(Ne,{value:l,children:a.jsx(Ve,{value:o,children:a.jsx(F.div,{...m,ref:t})})})});Ue.displayName="TabsRoot";const ls=q(),He=d.forwardRef((e,t)=>{const[o,s]=Fe(e),[{value:i},n]=ls(s,["value"]),l=E(i.getRootProps(),n);return a.jsx(Ne,{value:i,children:a.jsx(Ve,{value:o,children:a.jsx(F.div,{...l,ref:t})})})});He.displayName="TabsRootProvider";function Re(e){return bt(e,t=>t==="auto"?"auto":`span ${t}/span ${t}`)}const ie=d.forwardRef(function(t,o){const{area:s,colSpan:i,colStart:n,colEnd:l,rowEnd:m,rowSpan:f,rowStart:p,...y}=t,x=d.useMemo(()=>vt({gridArea:s,gridColumn:Re(i),gridRow:Re(f),gridColumnStart:n,gridColumnEnd:l,gridRowStart:p,gridRowEnd:m}),[s,i,n,l,m,f,p]);return a.jsx(ht.div,{ref:o,css:[x,t.css],...y})});ie.displayName="GridItem";const{withProvider:We,withContext:M}=Lt({key:"tabs"});We(He,"root",{forwardAsChild:!0});const cs=We(Ue,"root",{forwardAsChild:!0}),Ae=M(De,"trigger",{forwardAsChild:!0}),Pe=M(Be,"content",{forwardAsChild:!0});M("div","contentGroup");const ds=M(Oe,"list",{forwardAsChild:!0});M(Le,"indicator",{forwardAsChild:!0});const ms=[{id:"1",name:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",currentPick:"ÂÄôË£úA („Çø„Ç§„ÉóB)",acquisitions:[{name:"Â§ßË∞∑ÁøîÂπ≥",comment:"„ÇÑ„Å£„Å±„Çä‰∫åÂàÄÊµÅÔºÅ"},{name:"‰Ωê„ÄÖÊú®ÊúóÂ∏å",comment:"ÂÆåÂÖ®Ë©¶Âêà„ÅÆÂÆüÁ∏æ"}]},{id:"2",name:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",currentPick:"ÂÄôË£úB („Çø„Ç§„ÉóA)",acquisitions:[{name:"Â±±Êú¨Áî±‰º∏",comment:"ÊúÄÂº∑„ÅÆ„Ç®„Éº„Çπ"}]},{id:"3",name:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",currentPick:"ÈÅ∏Êäû‰∏≠...",acquisitions:[]}],ps=[{round:3,picks:[{order:1,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†G",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†H",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†I",comment:"„Çø„Ç§„ÉóC"}]},{round:2,picks:[{order:1,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†D",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†E",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†F",comment:"„Çø„Ç§„ÉóC"}]},{round:1,picks:[{order:1,userId:"1",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†A",comment:"„Çø„Ç§„ÉóA"},{order:2,userId:"2",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†B",comment:"„Çø„Ç§„ÉóB"},{order:3,userId:"3",userName:"‰ΩêËó§Ê¨°ÈÉé",avatar:"5",item:"ÂÄôË£ú„Ç¢„Ç§„ÉÜ„É†C",comment:"„Çø„Ç§„ÉóC"}]}],fs=[{id:"1",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"„Éâ„É©„Éï„Éà„ÇíÈñãÂßã„Åó„Åæ„Åó„ÅüÔºÅ",timestamp:"14:00",isSystem:!0,isCurrentUser:!1},{id:"2",userName:"Áî∞‰∏≠Â§™ÈÉé",avatar:"1",content:"‰ªäÂπ¥„ÅØÊäïÊâã‰∏≠ÂøÉ„Åß„ÅÑ„Åç„Åæ„ÅôÔºÅ",timestamp:"14:01",isSystem:!1,isCurrentUser:!0},{id:"3",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"Á¨¨1Â∑°ÁõÆ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü",timestamp:"14:05",isSystem:!0,isCurrentUser:!1},{id:"4",userName:"Â±±Áî∞Ëä±Â≠ê",avatar:"3",content:"Â§ßË∞∑Âèñ„Çâ„Çå„Åü„Äúüò≠",timestamp:"14:05",isSystem:!1,isCurrentUser:!1},{id:"5",userName:"„Ç∑„Çπ„ÉÜ„É†",avatar:"99",content:"‰ΩêËó§Ê¨°ÈÉé„Åï„Çì„ÅÆÈÅ∏Êäû‰∏≠„Åß„Åô",timestamp:"14:38",isSystem:!0,isCurrentUser:!1}],gs=4,vs=(e,t,o)=>{const[s,i]=d.useState([]),[n,l]=d.useState(!0),[m,f]=d.useState(null);return d.useEffect(()=>{if(!e){i([]),l(!1);return}const p=Rt(Pt(je,"app/onlinedraft/log"),fe("groupId","==",e),fe("deleteFlg","==",!1),At("date","asc"));return _e(p,x=>{const b=x.docs.map(r=>{var u;const h=r.data();var c;const g=(c=(u=h.createdAt)===null||u===void 0?void 0:u.toDate())!==null&&c!==void 0?c:new Date,v=h.userId==="system"||!h.userId,C={name:v?"„Ç∑„Çπ„ÉÜ„É†":"ÂåøÂêç„É¶„Éº„Ç∂„Éº",avatar:v?"99":"1"};return{id:r.id,userId:h.userId,userName:C.name,avatar:C.avatar,content:h.message,timestamp:g,isSystem:v,isCurrentUser:!v&&h.userId===o}});i(b),l(!1),f(null)},x=>{console.error("„ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏Áõ£Ë¶ñ„Ç®„É©„Éº:",x),f(x),l(!1)})},[e,t,o]),{messages:s,loading:n,error:m}},hs=e=>{const[t,o]=d.useState([]),[s,i]=d.useState(!0),[n,l]=d.useState(null),m=U(W),f=d.useMemo(()=>m.filter(p=>p==null?void 0:p.id).map(p=>p.id),[m]);return d.useEffect(()=>{if(!e||f.length===0){o([]),i(!1);return}const p=new Map,y=[];let x=0;const b=()=>{const r=[];p.forEach(u=>{r.push(...u)}),o(r)};return f.forEach(r=>{const u=Tt(je,"app/onlinedraft/selection",r),h=_e(u,c=>{const g=[];if(c.exists()){const v=c.data();v!=null&&v.selection&&Array.isArray(v.selection)&&v.selection.forEach(C=>{(!C.groupId||C.groupId===e)&&g.push({...C,userId:r,groupId:C.groupId||e})})}p.set(r,g),b(),x++,x>=f.length&&i(!1)},c=>{console.error(`User ${r} selection error:`,c),l(c),i(!1)});y.push(h)}),()=>{y.forEach(r=>r())}},[e,f]),{selections:t,loading:s,error:n}},bs=e=>{const t=jt(),o=_(z),s=_(G),i=_(W),n=_(le),l=_($),m=_(ce);d.useEffect(()=>{const c=sessionStorage.getItem("onlinedraft_user_id");c?(o(e),s(c)):t.push(`/lobby/${e}`)},[e,t,o,s]);const{users:f,loading:p}=It(e);d.useEffect(()=>{const c=f.map(({avatar:g,userId:v,userName:C})=>({name:C,id:v,avatar:g}));i(c)},[f,i]);const{messages:y,loading:x}=vs(e);d.useEffect(()=>{const c=y.map(({userId:g,timestamp:v,content:C})=>({date:v,message:C,userId:g}));n(c)},[y,n]);const{group:b,loading:r}=St(e);d.useEffect(()=>{var c,g;l({round:(c=b==null?void 0:b.round)!==null&&c!==void 0?c:-1,groupName:(g=b==null?void 0:b.groupName)!==null&&g!==void 0?g:""})},[b,l]);const{selections:u,loading:h}=hs(e);return d.useEffect(()=>{const c=u.map(({item:g,comment:v,round:C,userId:S,groupId:N,randomNumber:Ke})=>({item:g,comment:v,round:C,userId:S,groupId:N,randomNumber:Ke}));m(c)},[u,m]),{isLoading:p||x||r||h}},w=()=>{const e=Ee("draft"),t=U(G),o=U(z),{round:s,groupName:i}=U($),n=d.useRef(s),l=Nt({base:!0,md:!1}),[m,f]=d.useState({round:-1,userId:""}),[p,y]=d.useState("draft"),x=wt(),b=Et(),r=Ft(),u=Vt(),{incrementRound:h}=_t();d.useEffect(()=>{n.current!==-1&&s>n.current&&u.open(),n.current=s},[s,u]);const c=({userId:S,round:N})=>{f({round:N??s,userId:S??t}),x.open()},g=async({allSelected:S})=>{S?await C():b.open()},v=async S=>{await c(S)},C=async()=>{await h(o),b.close()};return l?a.jsxs(K,{h:"100vh",gap:0,children:[a.jsx(I,{bg:"white",borderBottom:"1px",borderColor:"gray.200",p:2,w:"full",position:"sticky",top:0,zIndex:10,children:a.jsxs(R,{justify:"space-between",align:"center",children:[a.jsx(I,{flex:1}),a.jsx(P,{fontSize:"lg",fontWeight:"bold",textAlign:"center",children:i}),a.jsx(I,{flex:1,display:"flex",justifyContent:"flex-end",children:a.jsxs(R,{gap:2,children:[a.jsx(pe,{}),a.jsx(me,{variant:"ghost",size:"sm",onClick:r.open,children:a.jsxs(R,{gap:1,align:"center",children:[a.jsx(de,{size:14}),a.jsx(P,{children:e("page.share")})]})})]})})]})}),a.jsxs(cs,{value:p,onValueChange:S=>y(S.value),flex:1,display:"flex",flexDirection:"column",w:"full",overflow:"hidden",children:[a.jsxs(ds,{bg:"gray.50",borderBottom:"2px solid",borderColor:"gray.200",flexShrink:0,children:[a.jsx(Ae,{value:"draft",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:a.jsxs(R,{gap:2,justify:"center",w:"full",children:[a.jsx(xt,{size:18}),a.jsx(P,{fontSize:"sm",children:e("page.draft")})]})}),a.jsx(Ae,{value:"chat",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:a.jsxs(R,{gap:2,justify:"center",w:"full",children:[a.jsx(yt,{size:18}),a.jsx(P,{fontSize:"sm",children:e("page.chatLog")})]})})]}),a.jsxs(I,{flex:1,overflow:"hidden",minH:0,children:[a.jsx(Pe,{value:"draft",h:"full",overflow:"auto",p:1,children:a.jsxs(K,{gap:3,p:1,children:[a.jsx(he,{variant:"sp",onItemSelect:c,onOpenResult:g}),a.jsx(Ie,{variant:"sp",onEditClick:v})]})}),a.jsx(Pe,{value:"chat",h:"full",overflow:"hidden",display:"flex",flexDirection:"column",children:a.jsx(I,{flex:1,overflow:"auto",p:3,children:a.jsx(ve,{})})})]})]}),p==="chat"&&a.jsx(I,{bg:"white",borderTop:"1px",borderColor:"gray.200",p:3,w:"full",position:"sticky",bottom:0,children:a.jsx(ge,{})}),a.jsx(be,{isOpen:x.isOpen,onClose:x.close,round:m.round,userId:m.userId},Math.random()),a.jsx(xe,{isOpen:b.isOpen,onClose:b.close,onExecuteOpenResult:C}),a.jsx(ye,{isOpen:r.isOpen,onClose:r.close,groupId:o,groupName:i}),a.jsx(Ce,{isOpen:u.isOpen,onClose:u.close,variant:u.variant})]}):a.jsxs(I,{minH:"100vh",py:2,children:[a.jsxs(we,{maxW:"full",children:[a.jsx(I,{mb:2,children:a.jsxs(R,{justify:"space-between",align:"center",children:[a.jsx(P,{fontSize:"2xl",fontWeight:"bold",color:"gray.800",children:i}),a.jsxs(R,{gap:3,children:[a.jsx(pe,{}),a.jsx(me,{variant:"outline",size:"md",onClick:r.open,children:a.jsxs(R,{gap:1,align:"center",children:[a.jsx(de,{size:16}),a.jsx(P,{children:e("page.share")})]})})]})]})}),a.jsxs(Bt,{templateColumns:"7fr 3fr",gap:2,h:"calc(100vh - 80px)",children:[a.jsx(ie,{h:"100%",children:a.jsxs(K,{gap:2,h:"100%",w:"full",align:"stretch",children:[a.jsx(he,{variant:"pc",onItemSelect:c,onOpenResult:g}),a.jsx(Ie,{variant:"pc",onEditClick:v})]})}),a.jsx(ie,{h:"100%",children:a.jsxs(I,{h:"100%",maxH:"calc(100vh - 70px)",bg:"white",boxShadow:"lg",p:3,borderRadius:"lg",display:"flex",flexDirection:"column",overflow:"hidden",children:[a.jsx(P,{fontSize:"lg",fontWeight:"bold",mb:3,flexShrink:0,children:e("page.chat")}),a.jsx(I,{flex:"1",overflow:"auto",mb:3,minH:0,children:a.jsx(ve,{})}),a.jsx(I,{flexShrink:0,children:a.jsx(ge,{})})]})})]})]}),a.jsx(be,{isOpen:x.isOpen,onClose:x.close,round:m.round,userId:m.userId},Math.random()),a.jsx(xe,{isOpen:b.isOpen,onClose:b.close,onExecuteOpenResult:C}),a.jsx(ye,{isOpen:r.isOpen,onClose:r.close,groupId:o,groupName:i}),a.jsx(Ce,{isOpen:u.isOpen,onClose:u.close,variant:u.variant})]})},Te=({groupId:e})=>{const t=Ee("draft"),{isLoading:o}=bs(e);return o?a.jsx(I,{bg:"gray.50",minH:"100vh",py:[4,8],children:a.jsx(we,{maxW:"container.lg",children:a.jsx(Ct,{message:t("page.loading")})})}):a.jsx(w,{})};try{w.displayName="DraftPageInner",w.__docgenInfo={description:`„Éâ„É©„Éï„ÉàÂÆüË°åÁîªÈù¢Inner„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàPresenterÔºâ
UIÊèèÁîª„Å®Áä∂ÊÖãÁÆ°ÁêÜ„ÇíÊãÖÂΩì„ÄÅÊñ∞„Åó„ÅÑhooksÊßãÈÄ†„Çí‰ΩøÁî®`,displayName:"DraftPageInner",props:{}}}catch{}try{Te.displayName="DraftPage",Te.__docgenInfo={description:`„Éâ„É©„Éï„ÉàÂÆüË°åÁîªÈù¢„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàContainerÔºâ
„É¢„ÉÉ„ÇØ„Éá„Éº„Çø„ÅÆÊèê‰æõ„ÅÆ„Åø„ÇíÊãÖÂΩì`,displayName:"DraftPage",props:{groupId:{defaultValue:null,description:"",name:"groupId",required:!0,type:{name:"string"}}}}}catch{}var J,Y,Q,Z,ee,te,se,ae,oe,re;const ze=({initialValues:e,children:t})=>($t(e),t),Ge=ms.map(e=>({id:e.id,name:e.name,avatar:e.avatar})),$e=fs.map(e=>({date:{toDate:()=>new Date,toMillis:()=>Date.now()},message:e.content,userId:e.userName==="Áî∞‰∏≠Â§™ÈÉé"?"user1":"user2"})),qe=ps.flatMap(e=>e.picks.map(t=>({item:t.item,comment:t.comment,round:e.round,userId:t.userId,groupId:"test-group-id",randomNumber:Math.random()}))),Xe={round:gs,groupName:"„ÉÜ„Çπ„Éà„Éâ„É©„Éï„Éà‰ºöË≠∞"},ia={title:"features/draft/DraftPage",component:w,parameters:{layout:"fullscreen"}},L={render:()=>a.jsx(ze,{initialValues:[[z,"test-group-id"],[G,"user1"],[$,Xe],[W,Ge],[le,$e],[ce,qe]],children:a.jsx(w,{})})},O={render:()=>a.jsx(ze,{initialValues:[[z,"test-group-id"],[G,"user1"],[$,Xe],[W,Ge],[le,$e],[ce,qe]],children:a.jsx(w,{})}),parameters:{viewport:{defaultViewport:"mobile1"}}};L.parameters={...L.parameters,docs:{...(J=L.parameters)===null||J===void 0?void 0:J.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>
}`,...(Q=L.parameters)===null||Q===void 0||(Y=Q.docs)===null||Y===void 0?void 0:Y.source},description:{story:`„Éá„Éï„Ç©„É´„Éà„ÅÆ„Éâ„É©„Éï„Éà„Éö„Éº„Ç∏Ë°®Á§∫
Jotai atom„Çí‰ΩøÁî®„Åó„ÅüÁä∂ÊÖãÁÆ°ÁêÜ„ÉÜ„Çπ„Éà`,...(ee=L.parameters)===null||ee===void 0||(Z=ee.docs)===null||Z===void 0?void 0:Z.description}}};O.parameters={...O.parameters,docs:{...(te=O.parameters)===null||te===void 0?void 0:te.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>,
  parameters: {
    viewport: {
      defaultViewport: 'mobile1'
    }
  }
}`,...(ae=O.parameters)===null||ae===void 0||(se=ae.docs)===null||se===void 0?void 0:se.source},description:{story:`SPË°®Á§∫„ÅÆÂº∑Âà∂Á¢∫Ë™çÁî®
„Éì„É•„Éº„Éù„Éº„Éà„ÇíÂ∞è„Åï„ÅèË®≠ÂÆö„Åó„Å¶SPÁâà„É¨„Ç§„Ç¢„Ç¶„Éà„ÇíÁ¢∫Ë™ç`,...(re=O.parameters)===null||re===void 0||(oe=re.docs)===null||oe===void 0?void 0:oe.description}}};const ua=["Default","SPLayout"];export{L as Default,O as SPLayout,ua as __namedExportsOrder,ia as default};
