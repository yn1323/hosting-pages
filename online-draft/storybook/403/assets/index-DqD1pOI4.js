import{r as p,j as e,B as m}from"./iframe-CPNykFu4.js";import{o as N,s as w,u as I,a as V}from"./zod-CJOOa1KA.js";import{A as z}from"./index-DINeRgO7.js";import{I as R}from"./index-BGCE8b3C.js";import{R as q}from"./responsive-modal-DETIp2Db.js";import{n as x}from"./index-DFT-raW7.js";import{V as h}from"./v-stack-ZFthQQXO.js";import{T as i}from"./index-DeSftEHM.js";import{S as k}from"./simple-grid-K-977ZjU.js";const C=({isOpen:r,onClose:s,onConfirm:u,usedAvatars:n=[]})=>{const t=x("lobby"),y=x("common"),[l,d]=p.useState(""),b=p.useMemo(()=>N({userName:w().min(1,t("avatarModal.validation.nameRequired")).max(20,t("avatarModal.validation.nameMaxLength")).trim()}),[t]),{register:A,handleSubmit:j,formState:{errors:c,isValid:M,isSubmitting:_},reset:f}=I({resolver:V(b),mode:"onChange",defaultValues:{userName:""}}),F=Array.from({length:18},(a,o)=>(o+1).toString()),B=async a=>{l&&(await u({name:a.userName,avatar:l}),f(),d(""))},g=()=>{f(),d(""),s()},E=a=>n.includes(a),D=l&&M;return e.jsxs(q,{isOpen:r,onClose:g,title:t("avatarModal.title"),actions:{cancel:{text:y("actions.cancel"),onClick:g},submit:{text:t("avatarModal.submit"),disabled:!D,loading:_,onClick:j(B)}},children:[e.jsxs(h,{gap:2,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:t("avatarModal.nameLabel")}),e.jsx(R,{...A("userName"),placeholder:t("avatarModal.namePlaceholder"),maxLength:20,size:"lg",error:!!c.userName}),c.userName&&e.jsx(i,{fontSize:"sm",color:"red.500",children:c.userName.message})]}),e.jsxs(h,{gap:4,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:t("avatarModal.avatarLabel")}),e.jsx(k,{columns:[4,6],gap:3,w:"full",children:F.map(a=>{const o=E(a),v=l===a;return e.jsxs(m,{position:"relative",cursor:o?"not-allowed":"pointer",opacity:o?.4:1,onClick:()=>!o&&d(a),children:[e.jsx(m,{p:.5,borderRadius:"lg",border:"2px solid",borderColor:v?"blue.400":o?"gray.300":"gray.200",bg:v?"blue.50":"white",transition:"all 0.15s",display:"flex",alignItems:"center",justifyContent:"center",_hover:o?{}:{borderColor:"blue.400",transform:"scale(1.05)"},children:e.jsx(z,{avatarNumber:a,size:"md",noBorder:!0})}),o&&e.jsx(m,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"red.500",color:"white",borderRadius:"full",w:"20px",h:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",children:"×"})]},a)})}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:t("avatarModal.avatarNote")})]})]})},S=()=>{const[r,s]=p.useState(!1),u=()=>s(!0),n=()=>s(!1);return{isOpen:r,open:u,close:n,modalProps:{isOpen:r,onClose:n}}};try{C.displayName="AvatarSelectionModal",C.__docgenInfo={description:`アバター選択モーダル
新規参加者用のアバター・名前選択UI`,displayName:"AvatarSelectionModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(userData: { name: string; avatar: string; }) => void | Promise<void>"}},usedAvatars:{defaultValue:{value:"[]"},description:"",name:"usedAvatars",required:!1,type:{name:"string[]"}}}}}catch{}try{S.displayName="useAvatarSelectionModal",S.__docgenInfo={description:`AvatarSelectionModal用カスタムフック
他のモーダルと同じパターンで開閉制御を提供`,displayName:"useAvatarSelectionModal",props:{}}}catch{}export{C as A};
