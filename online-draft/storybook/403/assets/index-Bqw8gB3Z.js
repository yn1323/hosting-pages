import{r as P,j as e,E as _,G as w,B as u,N as A,M as N}from"./iframe-CPNykFu4.js";import{A as C}from"./index-DINeRgO7.js";import{B as R}from"./index-CB7rXg8w.js";import{C as V}from"./index-z05DsOaL.js";import{g as k,c as D,d as $,u as q,s as F}from"./states-BgKcEv6C.js";import{n as O}from"./index-DFT-raW7.js";import{V as m}from"./v-stack-ZFthQQXO.js";import{H as j}from"./h-stack-IZP0I_-8.js";import{T as c}from"./index-DeSftEHM.js";const W=P.forwardRef(function(d,a){const{direction:l,align:r,justify:t,wrap:o,basis:h,grow:v,shrink:f,inline:x,...b}=d;return e.jsx(_.div,{ref:a,...b,css:{display:x?"inline-flex":"flex",flexDirection:l,alignItems:r,justifyContent:t,flexWrap:o,flexBasis:h,flexGrow:v,flexShrink:f,...d.css}})});W.displayName="Flex";const U=N(s=>{const d=s(q),a=s(F),{round:l}=s(k);return d.filter(r=>r==null?void 0:r.id).map(r=>{const t=a.find(o=>o.userId===r.id&&o.round===l);return{id:r.id,name:r.name,avatar:r.avatar,currentPick:(t==null?void 0:t.item)||void 0,acquisitions:[]}}).filter((r,t,o)=>o.findIndex(h=>h.id===r.id)===t)}),z=({variant:s="sp",onItemSelect:d,onOpenResult:a})=>{const l=O("draft"),r=w(U),{round:t}=w(k),o=w(D),h=w(F),v=w($),f=n=>h.some(i=>i.userId===n&&i.round===t),x=r.filter(n=>f(n.id)).length,b=r.length>0?Math.round(x/r.length*100):0,y=(n,i)=>({p:s==="pc"?2:1.5,bg:i?n?"blue.100":"green.100":n?"blue.50":"green.50",border:i?"2px solid":"1px solid",borderColor:i?n?"blue.500":"green.500":n?"blue.300":"green.300",borderRadius:"md",gap:1,align:"center",textAlign:"center"}),S=n=>n?{bg:"blue.400",color:"white",px:1,py:.5,borderRadius:"sm",fontSize:s==="pc"?"2xs":"xs",fontWeight:"bold"}:{gap:1,fontSize:s==="pc"?"2xs":"xs",color:"green.600"},B=f(o),E=x===r.length;return e.jsx(u,{w:"full",children:e.jsx(V,{variant:"elevated",size:"sm",children:e.jsxs(m,{gap:s==="pc"?2:3,w:"full",children:[e.jsxs(m,{gap:1,w:"full",children:[e.jsxs(j,{w:"full",justify:"space-between",children:[e.jsx(c,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:l("currentRound.round",{round:t})}),e.jsx(c,{fontSize:"xs",color:"gray.600",children:l("currentRound.selectionCount",{selected:x,total:r.length})})]}),e.jsx(u,{w:"full",h:"4px",bg:"gray.200",borderRadius:"full",children:e.jsx(u,{h:"full",bg:"green.500",borderRadius:"full",transition:"width 0.3s ease",width:`${b}%`})})]}),s==="pc"?e.jsx(u,{overflowX:"auto",w:"full",children:e.jsx(j,{gap:2,minW:"max-content",py:1,children:r.filter(n=>n==null?void 0:n.id).map((n,i)=>{const g=!f(n.id),p=n.id===o;return e.jsxs(m,{...y(g,p),flex:"0 0 auto",minW:"120px",maxW:"120px",children:[e.jsx(C,{avatarNumber:n.avatar,name:n.name,size:"sm"}),e.jsx(c,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:n.name}),g?e.jsx(u,{...S(!0),children:l("currentRound.selecting")}):e.jsxs(m,{gap:.5,...S(!1),children:[e.jsxs(j,{gap:1,children:[e.jsx(A,{size:10}),e.jsx(c,{children:l("currentRound.ready")})]}),p&&e.jsx(c,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:n.currentPick})]})]},`${n.id}-${i}`)})})}):e.jsx(u,{overflowX:"auto",w:"full",children:e.jsx(j,{gap:1,minW:"max-content",py:1,children:r.filter(n=>n==null?void 0:n.id).map((n,i)=>{const g=!f(n.id),p=n.id===o;return e.jsxs(m,{...y(g,p),flex:"0 0 auto",minW:"80px",maxW:"100px",children:[e.jsx(C,{avatarNumber:n.avatar,name:n.name,size:"xs"}),e.jsx(c,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:n.name}),g?e.jsx(u,{...S(!0),children:l("currentRound.selecting")}):e.jsxs(m,{gap:.5,...S(!1),children:[e.jsxs(j,{gap:1,children:[e.jsx(A,{size:10}),e.jsx(c,{children:l("currentRound.ready")})]}),p&&e.jsx(c,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:n.currentPick})]})]},`${n.id}-${i}`)})})}),(d||a)&&e.jsx(u,{w:"full",pt:s==="pc"?1:0,children:e.jsxs(W,{direction:"row",gap:2,w:"full",children:[d&&e.jsx(u,{flex:1,w:"full",children:e.jsx(R,{variant:"primary",size:"sm",onClick:()=>d({}),width:"full",disabled:v.isActive,children:l(B?"currentRound.changePick":"currentRound.makePick")})}),a&&e.jsx(u,{flex:1,w:"full",children:e.jsx(R,{variant:"secondary",size:"sm",onClick:()=>a({allSelected:E}),width:"full",disabled:x<1||v.isActive,children:l("currentRound.reveal")})})]})})]})})})};try{z.displayName="CurrentRoundStatus",z.__docgenInfo={description:`現在のラウンドの参加者選択状況を表示する共通コンポーネント
PC版とSP版で表示スタイルを切り替え可能`,displayName:"CurrentRoundStatus",props:{variant:{defaultValue:{value:"sp"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"pc"'},{value:'"sp"'}]}},onOpenResult:{defaultValue:null,description:"",name:"onOpenResult",required:!1,type:{name:"(({ allSelected }: { allSelected: boolean; }) => void)"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!1,type:{name:"(({ userId, round, }: { userId?: string; round?: number; }) => void) | undefined"}}}}}catch{}export{z as C};
