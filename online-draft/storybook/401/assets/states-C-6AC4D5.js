import{N as n}from"./iframe-C_rgkzEe.js";const x=n(""),U=n(""),E=n({round:-1,groupName:""}),j=n([]),O=n([]),R=n([]),f=n({conflicts:[],currentEditTarget:null,isActive:!1}),W=n(s=>{const u=s(g);if(!s(f).isActive)return null;for(const a of u){const c=a.conflictUsers.filter(m=>!m.isWinner);if(c.length>0)return{userId:c.reduce((t,r)=>r.randomNumber>t.randomNumber?r:t).userId,round:a.round}}return null}),y=n(null,(s,u)=>{const d=s(g);d.length>0&&u(f,{conflicts:d,currentEditTarget:null,isActive:!0})}),C=n(null,(s,u)=>{u(f,{conflicts:[],currentEditTarget:null,isActive:!1})}),g=n(s=>{const u=s(R),{round:d}=s(E),a=u.filter(t=>t.round<d),c={},m=a.reduce((t,r)=>(t[r.round]||(t[r.round]=[]),t[r.round].push(r),t),{});return Object.entries(m).forEach(([t,r])=>{const l=Number(t),p=r.reduce((i,e)=>(i[e.item]||(i[e.item]=[]),i[e.item].push(e),i),{});Object.entries(p).forEach(([i,e])=>{if(e.length>1){const N=Math.max(...e.map(o=>o.randomNumber)),A=e.map(o=>({userId:o.userId,randomNumber:o.randomNumber,isWinner:o.randomNumber===N})),h=A.filter(o=>!o.isWinner).reduce((o,b)=>b.randomNumber>o.randomNumber?b:o),I={round:l,item:i,conflictUsers:A,nextEditTarget:{userId:h.userId,round:l}};c[l]||(c[l]=[]),c[l].push(I)}})}),Object.values(c).flat()});export{O as a,x as b,U as c,f as d,g as e,y as f,E as g,C as h,W as i,R as s,j as u};
