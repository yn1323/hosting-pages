import{r as I,j as e,E as _,G as w,B as i,O as A,N as P}from"./iframe-C_rgkzEe.js";import{A as y}from"./index-C2bVUVc_.js";import{B as C}from"./index-DA8pZe5w.js";import{C as N}from"./index-BLk1nnUV.js";import{g as R,c as V,d as D,u as O,s as F}from"./states-C-6AC4D5.js";import{V as h}from"./v-stack-BdZrG5lB.js";import{H as j}from"./h-stack-kLvObkFg.js";import{T as a}from"./index-DvCjFio_.js";const W=I.forwardRef(function(u,c){const{direction:r,align:s,justify:t,wrap:d,basis:x,grow:f,shrink:m,inline:b,...v}=u;return e.jsx(_.div,{ref:c,...v,css:{display:b?"inline-flex":"flex",flexDirection:r,alignItems:s,justifyContent:t,flexWrap:d,flexBasis:x,flexGrow:f,flexShrink:m,...u.css}})});W.displayName="Flex";const $=P(n=>{const u=n(O),c=n(F),{round:r}=n(R);return u.filter(s=>s==null?void 0:s.id).map(s=>{const t=c.find(d=>d.userId===s.id&&d.round===r);return{id:s.id,name:s.name,avatar:s.avatar,currentPick:(t==null?void 0:t.item)||void 0,acquisitions:[]}}).filter((s,t,d)=>d.findIndex(x=>x.id===s.id)===t)}),z=({variant:n="sp",onItemSelect:u,onOpenResult:c})=>{const r=w($),{round:s}=w(R),t=w(V),d=w(F),x=w(D),f=l=>d.some(o=>o.userId===l&&o.round===s),m=r.filter(l=>f(l.id)).length,b=r.length>0?Math.round(m/r.length*100):0,v=(l,o)=>({p:n==="pc"?2:1.5,bg:o?l?"blue.100":"green.100":l?"blue.50":"green.50",border:o?"2px solid":"1px solid",borderColor:o?l?"blue.500":"green.500":l?"blue.300":"green.300",borderRadius:"md",gap:1,align:"center",textAlign:"center"}),S=l=>l?{bg:"blue.400",color:"white",px:1,py:.5,borderRadius:"sm",fontSize:n==="pc"?"2xs":"xs",fontWeight:"bold"}:{gap:1,fontSize:n==="pc"?"2xs":"xs",color:"green.600"},B=f(t),k=m===r.length;return e.jsx(i,{w:"full",children:e.jsx(N,{variant:"elevated",size:"sm",children:e.jsxs(h,{gap:n==="pc"?2:3,w:"full",children:[e.jsxs(h,{gap:1,w:"full",children:[e.jsxs(j,{w:"full",justify:"space-between",children:[e.jsxs(a,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:["Round ",s]}),e.jsxs(a,{fontSize:"xs",color:"gray.600",children:[m,"/",r.length," 人選択完了"]})]}),e.jsx(i,{w:"full",h:"4px",bg:"gray.200",borderRadius:"full",children:e.jsx(i,{h:"full",bg:"green.500",borderRadius:"full",transition:"width 0.3s ease",width:`${b}%`})})]}),n==="pc"?e.jsx(i,{overflowX:"auto",w:"full",children:e.jsx(j,{gap:2,minW:"max-content",py:1,children:r.filter(l=>l==null?void 0:l.id).map((l,o)=>{const g=!f(l.id),p=l.id===t;return e.jsxs(h,{...v(g,p),flex:"0 0 auto",minW:"120px",maxW:"120px",children:[e.jsx(y,{avatarNumber:l.avatar,name:l.name,size:"sm"}),e.jsx(a,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:l.name}),g?e.jsx(i,{...S(!0),children:"選択中"}):e.jsxs(h,{gap:.5,...S(!1),children:[e.jsxs(j,{gap:1,children:[e.jsx(A,{size:10}),e.jsx(a,{children:"入力完了"})]}),p&&e.jsx(a,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:l.currentPick})]})]},`${l.id}-${o}`)})})}):e.jsx(i,{overflowX:"auto",w:"full",children:e.jsx(j,{gap:1,minW:"max-content",py:1,children:r.filter(l=>l==null?void 0:l.id).map((l,o)=>{const g=!f(l.id),p=l.id===t;return e.jsxs(h,{...v(g,p),flex:"0 0 auto",minW:"80px",maxW:"100px",children:[e.jsx(y,{avatarNumber:l.avatar,name:l.name,size:"xs"}),e.jsx(a,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:l.name}),g?e.jsx(i,{...S(!0),children:"選択中"}):e.jsxs(h,{gap:.5,...S(!1),children:[e.jsxs(j,{gap:1,children:[e.jsx(A,{size:10}),e.jsx(a,{children:"入力完了"})]}),p&&e.jsx(a,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:l.currentPick})]})]},`${l.id}-${o}`)})})}),(u||c)&&e.jsx(i,{w:"full",pt:n==="pc"?1:0,children:e.jsxs(W,{direction:"row",gap:2,w:"full",children:[u&&e.jsx(i,{flex:1,w:"full",children:e.jsx(C,{variant:"primary",size:"sm",onClick:()=>u({}),width:"full",disabled:x.isActive,children:B?"指名を変更する":"指名する"})}),c&&e.jsx(i,{flex:1,w:"full",children:e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>c({allSelected:k}),width:"full",disabled:m<1||x.isActive,children:"指名発表"})})]})})]})})})};try{z.displayName="CurrentRoundStatus",z.__docgenInfo={description:`現在のラウンドの参加者選択状況を表示する共通コンポーネント
PC版とSP版で表示スタイルを切り替え可能`,displayName:"CurrentRoundStatus",props:{variant:{defaultValue:{value:"sp"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"pc"'},{value:'"sp"'}]}},onOpenResult:{defaultValue:null,description:"",name:"onOpenResult",required:!1,type:{name:"(({ allSelected }: { allSelected: boolean; }) => void)"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!1,type:{name:"(({ userId, round, }: { userId?: string; round?: number; }) => void) | undefined"}}}}}catch{}export{z as C};
