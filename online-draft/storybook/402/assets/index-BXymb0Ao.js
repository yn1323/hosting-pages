import{G as b,H as z,r as P,j as e,B as u,M as _}from"./iframe-CPNykFu4.js";import{A as F}from"./index-DINeRgO7.js";import{C as D}from"./index-z05DsOaL.js";import{g as T,e as U,d as V,f as $,h as q,u as H,s as G,i as B}from"./states-BgKcEv6C.js";import{u as O}from"./toaster-DFNY2rhd.js";import{n as M}from"./index-DFT-raW7.js";import{T as d}from"./index-DeSftEHM.js";import{G as E}from"./grid-CFy8adA8.js";import{H as I}from"./h-stack-IZP0I_-8.js";import{V as C}from"./v-stack-ZFthQQXO.js";import{A as Y,a as J,b as K,c as L,d as Q}from"./accordion-Dlm09CiK.js";const X=_(c=>{const p=c(G),s=c(H),{round:S}=c(T),x=c(U),m=c(B),y=p.filter(l=>l.round<S).reduce((l,a)=>(l[a.round]||(l[a.round]=[]),l[a.round].push(a),l),{}),g=(l,a)=>{if((m==null?void 0:m.userId)===l&&(m==null?void 0:m.round)===a)return"nextEditTarget";const h=x.find(f=>f.round===a);if(h){const f=h.conflictUsers.find(o=>o.userId===l);if(f)return f.isWinner?"winner":"loser"}return"none"};return Object.entries(y).map(([l,a])=>{const h=Number(l),f=s.map((o,i)=>{const t=a.find(r=>r.userId===o.id);return{order:i+1,userId:o.id,userName:o.name,avatar:o.avatar,item:(t==null?void 0:t.item)||"",comment:(t==null?void 0:t.comment)||"",conflictStatus:g(o.id,h)}});return{round:h,picks:f}}).sort((l,a)=>l.round-a.round)}),Z=_(c=>c(H).map(s=>({id:s.id,name:s.name,avatar:s.avatar,acquisitions:[]}))),k=(c,p)=>{switch(c){case"nextEditTarget":return{bg:"red.100",borderColor:"red.400",borderWidth:"2px",borderStyle:"solid",_hover:{bg:"red.150",borderColor:"red.500",transition:"all 0.15s ease"}};case"loser":return{bg:"orange.50",borderColor:"orange.300",borderWidth:"1px",borderStyle:"dashed",cursor:"not-allowed",opacity:.7,_hover:{bg:"orange.50"}};case"winner":case"none":return{borderColor:p?"gray.200":"gray.300",borderWidth:"1px",borderStyle:p?"solid":"dashed",_hover:{bg:"gray.50",borderColor:"gray.300",transition:"all 0.15s ease"}}}},W=({variant:c="sp",onEditClick:p})=>{const s=M("draft"),S=b(X),x=b(Z),{round:m}=b(T),j=b(U),y=b(V),g=b(B),l=z($),a=z(q),{errorToast:h}=O();P.useEffect(()=>{j.length>0&&!y.isActive?l():j.length===0&&y.isActive&&a()},[j.length,y.isActive,l,a]);const f=(o,i)=>{if(y.isActive&&g)if(g.userId===o&&g.round===i)p({userId:o,round:i});else{const t=j.find(n=>n.round===i&&n.conflictUsers.some(v=>v.userId===o&&!v.isWinner)),r=x.find(n=>n.id===g.userId);h(t?s("pastResults.editRequired",{targetUser:(r==null?void 0:r.name)||s("pastResults.targetUserDefault"),round:g.round}):s("pastResults.resolving",{targetUser:(r==null?void 0:r.name)||s("pastResults.targetUserDefault"),round:g.round}))}else p({userId:o,round:i})};if(c==="pc"){const o={p:2,bg:"gray.100",borderRadius:"md",fontSize:"xs",fontWeight:"bold",textAlign:"center",color:"gray.700",display:"flex",alignItems:"center",justifyContent:"center",minH:"40px"},i={p:2,bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",fontSize:"xs",minH:"40px",display:"flex",alignItems:"center"};return m===1?e.jsx(u,{flex:1,w:"full",children:e.jsx(D,{variant:"elevated",size:"md",children:e.jsxs(u,{h:"full",display:"flex",flexDirection:"column",children:[e.jsx(d,{fontSize:"md",fontWeight:"bold",mb:3,children:s("pastResults.heading")}),e.jsx(u,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",py:8,children:e.jsxs(d,{fontSize:"sm",color:"gray.500",textAlign:"center",children:[s("pastResults.noResults"),e.jsx("br",{}),s("pastResults.waitForFirst")]})})]})})}):e.jsx(u,{flex:1,w:"full",pb:2,children:e.jsx(D,{variant:"elevated",size:"md",children:e.jsxs(u,{h:"full",display:"flex",flexDirection:"column",children:[e.jsx(d,{fontSize:"md",fontWeight:"bold",mb:3,children:s("pastResults.resultHeading")}),e.jsxs(E,{templateColumns:`60px ${"minmax(120px, 1fr) ".repeat(x.length)}`,gap:2,mb:2,children:[e.jsx(u,{...o,children:"Round"}),x.map(t=>e.jsx(u,{...o,children:e.jsxs(I,{gap:1,justify:"center",children:[e.jsx(F,{avatarNumber:t.avatar,name:t.name,size:"xs"}),e.jsx(d,{children:t.name})]})},t.id))]}),e.jsx(u,{flex:"1",overflow:"auto",children:e.jsx(C,{gap:1,align:"stretch",children:S.sort((t,r)=>t.round-r.round).map(t=>e.jsxs(E,{templateColumns:`60px ${"minmax(120px, 1fr) ".repeat(x.length)}`,gap:2,children:[e.jsx(u,{...i,fontSize:"sm",fontWeight:"bold",textAlign:"center",color:"gray.800",justifyContent:"center",children:t.round}),x.map(r=>{const n=t.picks.find(N=>N.userId===r.id),v=!!(n!=null&&n.item),A=(n==null?void 0:n.conflictStatus)||"none",w=k(A,v),R=A!=="loser";return e.jsx(u,{...i,...w,cursor:R?"pointer":"not-allowed",onClick:()=>{f(r.id,t.round)},children:n!=null&&n.item?e.jsxs(C,{gap:0,align:"start",w:"full",children:[e.jsx(d,{fontWeight:"medium",color:"gray.800",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",children:n.item}),e.jsx(d,{color:"gray.500",fontSize:"2xs",py:n.comment!==""?0:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",children:n.comment!==""?`(${n.comment})`:" "})]}):e.jsx(d,{color:"gray.400",fontSize:"2xs",children:s("pastResults.addItem")})},r.id)})]},t.round))})})]})})})}return m===1?e.jsxs(C,{gap:2,w:"full",children:[e.jsx(d,{fontSize:"md",fontWeight:"bold",color:"gray.800",alignSelf:"start",children:s("pastResults.resultHeading")}),e.jsx(u,{w:"full",py:12,display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.50",borderRadius:"lg",border:"1px solid",borderColor:"gray.200",children:e.jsxs(d,{fontSize:"sm",color:"gray.500",textAlign:"center",children:[s("pastResults.noResultsYet"),e.jsx("br",{}),s("pastResults.startFirst")]})})]}):e.jsxs(C,{gap:2,w:"full",children:[e.jsx(d,{fontSize:"md",fontWeight:"bold",color:"gray.800",alignSelf:"start",children:s("pastResults.resultHeading")}),e.jsx(Y,{defaultValue:[],multiple:!0,w:"full",variant:"enclosed",children:S.sort((o,i)=>o.round-i.round).map(o=>{const i=j.some(t=>t.round===o.round);return e.jsxs(J,{value:`round-${o.round}`,children:[e.jsx(K,{bg:i?"red.50":void 0,borderColor:i?"red.200":void 0,_hover:{bg:i?"red.100":"gray.50"},children:e.jsxs(I,{justify:"space-between",w:"full",cursor:"pointer",children:[e.jsxs(d,{fontSize:"sm",fontWeight:"bold",color:i?"red.700":"gray.700",children:["Round ",o.round,i&&" ðŸ”¥"]}),e.jsx(L,{color:i?"red.500":void 0})]})}),e.jsx(Q,{children:e.jsx(C,{gap:1,w:"full",py:2,children:x.map(t=>{const r=o.picks.find(R=>R.userId===t.id),n=!!(r!=null&&r.item),v=(r==null?void 0:r.conflictStatus)||"none",A=k(v,n),w=v!=="loser";return e.jsxs(I,{w:"full",p:1.5,...A,borderRadius:"md",cursor:w?"pointer":"not-allowed",onClick:()=>{f(t.id,o.round)},children:[e.jsx(F,{avatarNumber:t.avatar,name:t.name,size:"xs"}),e.jsxs(C,{align:"start",gap:0,flex:1,children:[e.jsx(d,{fontSize:"sm",fontWeight:"medium",children:t.name}),r!=null&&r.item?e.jsxs(e.Fragment,{children:[e.jsx(d,{fontSize:"sm",color:"gray.600",children:r.item}),e.jsx(d,{fontSize:"xs",color:"gray.600",py:r.comment!==""?0:2,children:r.comment!==""?`(${r.comment})`:""})]}):e.jsx(d,{fontSize:"xs",color:"gray.400",py:2,children:s("pastResults.addItem")})]})]},t.id)})})})]},o.round)})})]})};try{W.displayName="PastDraftResults",W.__docgenInfo={description:`éŽåŽ»ã®ãƒ‰ãƒ©ãƒ•ãƒˆçµæžœè¡¨ç¤ºã®å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
PCç‰ˆ: ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼è¡¨ç¤º
SPç‰ˆ: ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å½¢å¼è¡¨ç¤º`,displayName:"PastDraftResults",props:{variant:{defaultValue:{value:"sp"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"pc"'},{value:'"sp"'}]}},onEditClick:{defaultValue:null,description:"",name:"onEditClick",required:!0,type:{name:"({ userId, round }: { userId?: string | undefined; round?: number | undefined; }) => void"}}}}}catch{}export{W as P};
